sudo: false
language: node_js
node_js:
- node
- 14
- 12
- 10
branches:
  only:
  - master
env:
  global:
  - secure: GC+la3Maq49IY3UQnLCY20VPN7MyuR1++2nJOu97SQox2Dxtia1PThxwewBbowBWLX7ZeR3qYoN1WjpCXYSrbmwwRrG831WHt4tLQoxiYvM8oGlxnt9dVZyK39LHAUVGE+HGO/9B40ZCddKZZwtRLaV+ledkrnn7/UPpCKNDR6I=
  - secure: XidG+NXQB5l3ZU9JRC5H/ZZRygBqtu859D7iRbk9RRaeBmOGosuBWI1ucVV5n0+aBKh0wFtBMihTfLbUNGe3UhfxxY/mX0010kM3fc4tdTjDoZcVyGcxGENUln2N3O86C2JCZUlEch2UBrimBcZbZ2Y2Xi/3osa5wEm3o55PJbU=
  matrix:
  - REACT_VERSION=15.6.0 JQUERY_VERSION=1.11.0
  - REACT_VERSION=17.0.2 JQUERY_VERSION=3.6.0
cache:
  directories:
  - node_modules
install:
- npm install
before_script:
- if [ "$JQUERY_VERSION" ]; then npm install --force jquery@~$JQUERY_VERSION; fi
- if [ "$REACT_VERSION" ]; then npm install --force react-dom@~$REACT_VERSION react@~$REACT_VERSION;
  fi
- cd node_modules; ln -f -s ../packages/* .; cd ..
script:
- npm run lint
- bash test/run.sh
after_success: npm run coverage
